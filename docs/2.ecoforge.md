# 🌍 EcoForge - Ecosystem Dynamics

## Overview - From Organisms to Ecosystems

**EcoForge is where individual organisms become ecosystems.** Life doesn't exist in isolation—organisms form complex webs of interdependence, competition, and cooperation that create self-sustaining systems with emergent stability.

### Design Goals

1. **Visualize food webs** - make energy flow visible and beautiful
2. **Teach ecology principles** - carrying capacity, trophic levels, succession
3. **Show fragility and resilience** - ecosystems collapse and recover
4. **Demonstrate coevolution** - species shape each other
5. **Create living worlds** - systems that feel truly alive

### The Four Phases

```txt
PHASE 1: FOOD CHAINS (Levels 6-9)
└─ Producer → Consumer → Predator (linear)

PHASE 2: FOOD WEBS (Levels 10-15)
└─ Complex interconnections, multiple pathways

PHASE 3: BIOMES (Levels 16-22)
└─ Environmental conditions shape communities

PHASE 4: PLANETARY ECOLOGY (Levels 23-28)
└─ Global systems, biogeochemical cycles
```txt

---

## Phase 1: Food Chains (Levels 6-9)

### The Rules

```txtjavascript
ECOLOGY_RULES = {
  energy_flow: {
    description: "Energy flows from producers to consumers",
    source: "Sunlight → Plants → Herbivores → Carnivores",
    loss: "~90% lost at each trophic level (heat, metabolism)",
    visualization: "Neon streams flowing through network"
  },
  
  trophic_levels: {
    producers: "Autotrophs (photosynthesis/chemosynthesis)",
    primary_consumers: "Herbivores (eat producers)",
    secondary_consumers: "Carnivores (eat herbivores)",
    tertiary_consumers: "Apex predators (eat carnivores)",
    decomposers: "Recyclers (return nutrients)"
  },
  
  carrying_capacity: {
    description: "Maximum population sustainable by resources",
    formula: "K = f(resources, space, competition)",
    dynamics: "Population oscillates around K",
    visualization: "Graph showing population vs capacity"
  },
  
  population_dynamics: {
    growth: "Exponential when below K, slows near K",
    predator_prey: "Coupled oscillations (Lotka-Volterra)",
    competition: "Multiple species compete for resources",
    extinction: "Population reaches zero (permanent loss)"
  }
};
```txt

### Level 6: Ecosystem Gardener

**Goal:** Balance simple food chain (producer → consumer)

**Tutorial Flow:**

```txt
1. "Life creates ecosystems."
   └─ Zoom out from single organism
   └─ Show population of organisms
   
2. "These are producers..."
   └─ Green organisms appear (photosynthetic)
   └─ They generate energy from sunlight (golden rays)
   └─ Population grows exponentially
   └─ "Watch what happens..."
   
3. Population explosion
   └─ Producers fill screen
   └─ Resources depleted (ground turns brown)
   └─ Mass die-off (collapse!)
   └─ "Without limits, populations crash."
   
4. "Now add consumers..."
   └─ Small herbivore organisms spawn
   └─ They eat producers
   └─ Population balance emerges
   └─ "Predation creates stability!"
   
5. POPULATION GRAPH appears:
   │   ╱╲    ╱╲
   │  ╱  ╲  ╱  ╲  ← Producers (green)
   │ ╱    ╲╱    ╲
   └─────────────────> Time
   │  ╱╲    ╱╲
   │ ╱  ╲  ╱  ╲    ← Consumers (cyan)
   │╱    ╲╱    ╲
   └─────────────────> Time
   
   "Classic predator-prey oscillation"
   
6. CHALLENGE: Maintain balance for 500 generations
   └─ Adjust sunlight intensity
   └─ Adjust producer/consumer birth rates
   └─ Goal: Stable oscillations (no extinction)
```txt

**What Emerges:**

```txt
Initial Chaos:
├─ Wild population swings
├─ Frequent local extinctions
├─ System very sensitive to parameters
└─ Player learns: Balance is delicate

Stabilization:
├─ Oscillations dampen
├─ Producers and consumers coexist
├─ Ratio stabilizes (~5:1 typically)
└─ INSIGHT: Predation regulates populations

Carrying Capacity:
├─ Maximum sustainable population
├─ Determined by resources (sunlight, space)
├─ Populations fluctuate around K
└─ INSIGHT: Resources limit growth
```txt

### Trophic Levels Visualization

```txt
ENERGY PYRAMID:

Tertiary Consumers (Apex)     ⬡  (1 organism)
      ↑ 10% energy transfer    
Secondary Consumers           ⬡⬡⬡  (10 organisms)
      ↑ 10% energy transfer
Primary Consumers            ⬡⬡⬡⬡⬡  (100 organisms)
      ↑ 10% energy transfer
Producers                 ⬡⬡⬡⬡⬡⬡⬡⬡⬡  (1000 organisms)
      ↑ sunlight

Visual Design:
├─ Neon energy streams (yellow) flow upward
├─ Size of each level = biomass
├─ Thickness of flow = energy transfer
└─ 90% fades to heat (red particles dissipate)
```txt

### Code Summary: Trophic Level System

```txtjavascript
class TrophicLevel {
  constructor(level, organisms) {
    this.level = level; // 0=producer, 1=herbivore, 2=carnivore...
    this.organisms = organisms;
    this.totalBiomass = this.calculateBiomass();
    this.energyInput = 0;
    this.energyOutput = 0;
  }
  
  update(deltaTime) {
    // Energy flows into this level (from prey)
    this.energyInput = this.calculateEnergyIn();
    
    // Energy flows out (to predators, metabolism, heat)
    this.energyOutput = this.calculateEnergyOut();
    
    // Net energy = growth or decline
    let netEnergy = this.energyInput - this.energyOutput;
    this.adjustPopulation(netEnergy, deltaTime);
  }
  
  calculateEnergyIn() {
    if (this.level === 0) {
      // Producers: energy from sun
      return SUNLIGHT_INTENSITY * this.organisms.length;
    } else {
      // Consumers: energy from eating lower level
      let preyLevel = ecosystem.getTrophicLevel(this.level - 1);
      return this.predationEfficiency * preyLevel.totalBiomass;
    }
  }
  
  calculateEnergyOut() {
    // Basal metabolism
    let metabolicLoss = METABOLIC_RATE * this.totalBiomass;
    
    // Energy to predators (if not apex)
    let predationLoss = 0;
    if (this.level < MAX_TROPHIC_LEVEL) {
      let predatorLevel = ecosystem.getTrophicLevel(this.level + 1);
      predationLoss = predatorLevel.predationEfficiency * this.totalBiomass;
    }
    
    return metabolicLoss + predationLoss;
  }
}
```txt

### Level 7: Nutrient Cycling

**Goal:** Close the loop with decomposers

### New Mechanic: Decomposition

```txt
THE MISSING PIECE:

Before:
├─ Organisms die
├─ Bodies disappear
└─ Nutrients lost from system

Problem:
└─ Nutrients depleted over time
└─ System unsustainable

Solution: DECOMPOSERS
├─ Fungi and bacteria
├─ Break down dead organisms
├─ Return nutrients to soil
└─ Producers reuse nutrients

Result:
└─ Closed nutrient cycle
└─ System self-sustaining
└─ INSIGHT: Recycling is essential
```txt

**Visualization:**

```txt
NUTRIENT CYCLE:

    SUNLIGHT ☀️
       ↓
   PRODUCERS 🌿
       ↓ (eaten)
   CONSUMERS 🐰
       ↓ (eaten)
   PREDATORS 🦊
       ↓ (death)
   DECOMPOSERS 🍄
       ↓ (decay)
   NUTRIENTS 💎
       ↓ (absorbed)
   PRODUCERS 🌿 ← CYCLE COMPLETES!

Neon Visualization:
├─ Green: Producer growth
├─ Cyan: Energy flow to consumers
├─ Red: Predation
├─ Brown: Death and decay
├─ Yellow: Nutrient return (glowing particles)
└─ Beautiful circular flow pattern
```txt

**What Emerges:**

```txt
Without Decomposers:
├─ Nutrients accumulate in dead bodies
├─ Soil depleted
├─ Producers decline
├─ Entire system collapses
└─ Extinction cascade

With Decomposers:
├─ Dead organisms recycled
├─ Nutrients return to soil
├─ Producers thrive indefinitely
├─ Sustainable ecosystem!
└─ INSIGHT: Death feeds life

Decomposer Specialization:
├─ Some decompose plants (cellulose)
├─ Some decompose animals (proteins)
├─ Some specialize in toxins
├─ Division of labor emerges
└─ Ecosystem complexity increases
```txt

### Level 8-9: Predator-Prey Dynamics

**Goal:** Understand coupled oscillations

**Classic Lotka-Volterra Model:**

```txtjavascript
PREDATOR_PREY_EQUATIONS = {
  prey_growth: "dN/dt = rN - aNP",
  // N = prey population
  // r = intrinsic growth rate
  // a = predation rate
  // P = predator population
  
  predator_growth: "dP/dt = baNP - mP",
  // b = conversion efficiency (prey → predator energy)
  // m = predator mortality rate
  
  result: "Coupled oscillations - populations cycle together"
};
```txt

**Tutorial:**

```txt
1. Setup: Predators and prey in same environment
   
2. Observation Phase 1: Prey abundant
   ├─ Many rabbits, few foxes
   ├─ Rabbits reproduce rapidly
   ├─ Population explodes
   
3. Observation Phase 2: Predators increase
   ├─ Abundant prey → foxes well-fed
   ├─ Fox population grows
   ├─ More foxes hunt
   
4. Observation Phase 3: Prey decline
   ├─ Heavy predation pressure
   ├─ Rabbit population crashes
   ├─ Foxes now have less food
   
5. Observation Phase 4: Predator decline
   ├─ Starvation among foxes
   ├─ Fox population crashes
   ├─ Pressure on rabbits released
   
6. CYCLE REPEATS!
   └─ Classic oscillation pattern
   └─ Neither species goes extinct (if balanced)
   └─ "This is how nature maintains balance"
```txt

**Graph Visualization:**

```txt
POPULATION OVER TIME:

Prey │     ╱───╲         ╱───╲
     │    ╱     ╲       ╱     ╲
     │   ╱       ╲     ╱       ╲
     └──────────────────────────────> Time
         ↑       ↑     ↑       ↑
         │       │     │       │
Pred │   ╱───╲   │   ╱───╲   │
     │  ╱     ╲  │  ╱     ╲  │
     │ ╱       ╲ │ ╱       ╲ │
     └──────────────────────────────> Time
     
Notice: Predator peaks LAG behind prey peaks
└─ Takes time for predators to respond to prey abundance
└─ Realistic ecological delay
```txt

**What Emerges:**

```txt
Stable Coexistence:
├─ Neither species driven to extinction
├─ Oscillations persist indefinitely
├─ System resilient to perturbations
└─ INSIGHT: Balance through cycles

Phase Space (Advanced Visualization):
├─ Plot prey vs predator (not vs time)
├─ Creates circular/elliptical orbit
├─ Shows system stability
└─ Beautiful mathematical pattern

Environmental Effects:
├─ Change sunlight → affects prey growth (r)
├─ Whole system responds
├─ Oscillations shift but persist
└─ INSIGHT: Bottom-up vs top-down control
```txt

---

## Phase 2: Food Webs (Levels 10-15)

### The Leap: Linear to Network

**Key Insight:** Real ecosystems aren't simple chains—they're complex webs.

### Level 10: Web of Life

**Goal:** Build ecosystem with 5+ interconnected species

**New Complexity:**

```txt
SIMPLE CHAIN:
Grass → Rabbit → Fox

COMPLEX WEB:
        Fox ←──┐
       ╱  ╲    │
      ╱    ╲   │
  Rabbit  Mouse │
    ╱        ╲  │
   ╱          ╲ │
Grass        Seeds
   ╲          ╱
    ╲        ╱
     Insects
     
Multiple pathways:
├─ Fox eats rabbits AND mice
├─ Rabbits eat grass
├─ Mice eat seeds AND insects
├─ Insects eat grass
└─ Everything connected!
```txt

**Why This Matters:**

```txt
RESILIENCE:

Simple Chain:
├─ If rabbits go extinct
├─ Foxes starve
├─ System collapses
└─ FRAGILE

Complex Web:
├─ If rabbits go extinct
├─ Foxes switch to mice
├─ System adapts
└─ RESILIENT

INSIGHT: Diversity = Stability
└─ More connections = more pathways
└─ Alternative food sources available
└─ System can absorb shocks
```txt

**Visualization:**

```txt
FOOD WEB DISPLAY:

Node = Species (geometric shape, color-coded)
├─ Producers: Green hexagons
├─ Herbivores: Cyan circles
├─ Carnivores: Red triangles
└─ Omnivores: Purple diamonds

Edges = "Eats" relationship (neon lines)
├─ Thickness = interaction strength
├─ Animation = energy flowing
└─ Color = trophic level

Interactive:
├─ Click species → highlight connections
├─ Remove species → see cascade effects
├─ Add species → see integration
└─ Real-time network visualization
```txt

### Level 11-12: Keystone Species

**Goal:** Discover species whose removal collapses ecosystem

**The Concept:**

```txt
KEYSTONE SPECIES:
└─ Disproportionate impact relative to abundance
└─ Like keystone in arch: remove it, arch collapses
└─ Not most abundant, but most important

Examples:
├─ Sea otters (control sea urchins)
├─ Wolves (control deer, reshape landscape)
├─ Beavers (create wetlands)
└─ Fig trees (feed many species year-round)
```txt

**Tutorial:**

```txt
1. Balanced ecosystem: 10 species thriving
   
2. "What happens if we remove species X?"
   └─ Player clicks on predator species
   └─ "Remove from ecosystem?"
   
3. Removal effect cascades:
   ├─ Prey population explodes (no predation)
   ├─ Overgrazing depletes plants
   ├─ Herbivores starve (overshoot K)
   ├─ Producers slow to recover
   ├─ Other carnivores decline (prey quality poor)
   └─ Ecosystem collapses to simple state
   
4. "This was a KEYSTONE SPECIES"
   └─ Critical structural role
   └─ System depends on its presence
   
5. CHALLENGE: Identify keystone before removal
   └─ Observe network structure
   └─ Predict which species are critical
   └─ Test hypothesis by temporary removal
```txt

**Network Analysis:**

```txtjavascript
class KeystoneDetector {
  // Identify species with highest betweenness centrality
  findKeystoneSpecies(foodWeb) {
    let centrality = new Map();
    
    for (let species of foodWeb.species) {
      // Count shortest paths through this species
      let pathCount = this.countPathsThrough(species, foodWeb);
      centrality.set(species, pathCount);
    }
    
    // Highest centrality = likely keystone
    let keystone = max(centrality);
    return keystone;
  }
  
  // Simulate removal and measure impact
  predictRemovalImpact(species, foodWeb) {
    let beforeDiversity = foodWeb.calculateDiversity();
    let beforeStability = foodWeb.calculateStability();
    
    // Temporarily remove species
    let altered = foodWeb.copy();
    altered.remove(species);
    altered.simulate(1000); // simulate time steps
    
    let afterDiversity = altered.calculateDiversity();
    let afterStability = altered.calculateStability();
    
    return {
      diversityChange: afterDiversity - beforeDiversity,
      stabilityChange: afterStability - beforeStability,
      isKeystone: (diversityChange < -0.5 || stabilityChange < -0.5)
    };
  }
}
```txt

**What Emerges:**

```txt
Keystone Predators:
├─ Control prey populations
├─ Prevent overgrazing
├─ Maintain plant diversity
└─ INSIGHT: Predators benefit ecosystem

Keystone Prey:
├─ Food source for many predators
├─ High-quality energy
├─ Predictable availability
└─ INSIGHT: Not just predators matter

Keystone Engineers:
├─ Modify environment (beavers, trees)
├─ Create habitat for others
├─ Structure entire community
└─ INSIGHT: Physical structure matters

Conservation Lesson:
└─ Protect keystone species first
└─ "Save the redwood, save the forest"
└─ Real-world relevance
```txt

### Level 13-15: Trophic Cascades

**Goal:** Witness top-down effects through food web

**The Phenomenon:**

```txt
TROPHIC CASCADE:
Effects propagate through multiple levels

Example: Wolves in Yellowstone
├─ Wolves removed (1920s)
├─ Deer population explodes
├─ Overgrazing of riverside willows
├─ Fewer willows = bank erosion
├─ River channels change!
├─ Beaver decline (need willows)
├─ Songbirds decline (nest in willows)
└─ Wolves reintroduced (1995)
   └─ Cascade reverses!
   └─ Ecosystem recovers
```txt

**In Game:**

```txt
Setup: 4-level food web
├─ Plants
├─ Herbivores  
├─ Small carnivores
└─ Apex predator

Remove apex predator:
├─ Small carnivores increase
├─ Herbivores decrease (heavy predation)
├─ Plants INCREASE (less grazing)
└─ Paradox: Top predator helps plants!

Restore apex predator:
├─ Small carnivores decrease
├─ Herbivores increase
├─ Plants decrease
└─ System returns to balance
```txt

**Visualization:**

```txt
TROPHIC CASCADE DISPLAY:

Before Removal:           After Removal:
   Wolves                    [REMOVED]
   ↓ controls                     ↑ no control
   Coyotes                   Coyotes ↑↑
   ↓ controls                     ↓↓ overpredation
   Rabbits                   Rabbits ↓
   ↓ grazes                       ↓ less grazing
   Plants                    Plants ↑↑

Neon Animation:
├─ Removing species = node dims
├─ Connected species glow (affected)
├─ Population changes = size pulsing
├─ Cascade waves through network
└─ Beautiful ripple effect
```txt

**What Emerges:**

```txt
Indirect Effects:
├─ Apex affects plants (3 levels down!)
├─ "Enemy of my enemy is my friend"
├─ Counter-intuitive outcomes
└─ INSIGHT: Everything connected

Ecosystem Management:
├─ Can't manage species in isolation
├─ Actions have distant consequences
├─ Need systems thinking
└─ Real-world conservation insight

Mesopredator Release:
├─ Remove apex predator
├─ Mid-level predators explode
├─ Worse for prey than apex alone
└─ INSIGHT: Balance matters more than removal
```txt

---

## Phase 3: Biomes (Levels 16-22)

### Environmental Determinism

**Key Insight:** Climate and geography shape ecosystems.

### Level 16: Climate and Life

**Goal:** See how temperature and rainfall determine biome type

**The Rules:**

```txtjavascript
BIOME_CLASSIFICATION = {
  desert: {
    temperature: "hot or cold",
    rainfall: "<250mm/year",
    vegetation: "sparse, drought-adapted",
    fauna: "nocturnal, water-efficient"
  },
  
  grassland: {
    temperature: "moderate",
    rainfall: "250-750mm/year",
    vegetation: "grasses dominate, few trees",
    fauna: "grazers, burrowers, fast runners"
  },
  
  forest: {
    temperature: "varies",
    rainfall: ">750mm/year",
    vegetation: "trees dominate, layered canopy",
    fauna: "arboreal, diverse niches"
  },
  
  tundra: {
    temperature: "very cold",
    rainfall: "low (frozen)",
    vegetation: "mosses, lichens, low plants",
    fauna: "cold-adapted, migratory"
  },
  
  rainforest: {
    temperature: "hot",
    rainfall: ">2000mm/year",
    vegetation: "maximum diversity, dense",
    fauna: "highest species richness"
  }
};
```txt

**Biome Diagram:**

```txt
WHITTAKER BIOME DIAGRAM:

Temp  │
Hot   │  Rainforest ════ Savanna ════ Desert
      │      ║              ║            ║
Warm  │  Tropical    ══ Grassland  ══ Scrub
      │   Forest        Temperate
      │      ║              ║            ║
Cool  │   Temperate   ══  Taiga    ══  ║
      │    Forest      Boreal Forest    ║
      │      ║              ║            ║
Cold  │   Tundra ═════════════════════ Ice
      │
      └───────────────────────────────────>
           Wet        Moderate      Dry
                    Rainfall

Player can:
├─ Adjust temperature slider → biome transitions
├─ Adjust rainfall slider → biome transitions
├─ Observe: Species composition changes
└─ Each biome has characteristic species
```txt

**What Emerges:**

```txt
Biome Transitions:
├─ Forest → Grassland (reduce rain)
├─ Grassland → Desert (reduce rain more)
├─ Species die off or adapt
├─ New species colonize
└─ INSIGHT: Climate determines community

Species Adaptations:
├─ Desert: cacti (water storage)
├─ Tundra: small size (heat retention)
├─ Rainforest: climbing (reach light)
├─ Grassland: speed (escape predators)
└─ INSIGHT: Form follows environment

Biodiversity Patterns:
├─ Tropical rainforest: Highest diversity
├─ Tundra: Lowest diversity
├─ Temperature + Water = Diversity
└─ INSIGHT: Climate determines richness
```txt

### Level 17-19: Succession

**Goal:** Observe ecological succession over time

**Primary Succession:**

```txt
STARTING POINT: Bare rock (after volcanic eruption)

Stage 1: Pioneer Species (Years 0-10)
├─ Lichens colonize bare rock
├─ Weathering creates thin soil
├─ Mosses appear
└─ Nitrogen-fixing bacteria

Stage 2: Early Succession (Years 10-50)
├─ Grasses and small plants
├─ Soil deepens
├─ Insects colonize
└─ Small animals appear

Stage 3: Mid Succession (Years 50-150)
├─ Shrubs and small trees
├─ Shade-tolerant species
├─ More complex food webs
└─ Microhabitats form

Stage 4: Climax Community (Years 150+)
├─ Mature forest
├─ Maximum biomass
├─ Stable species composition
├─ High diversity
└─ Equilibrium state
```txt

**Secondary Succession:**

```txt
STARTING POINT: Disturbed ecosystem (after fire, logging)

Faster than primary:
├─ Soil already present
├─ Seed bank in soil
├─ Nearby seed sources
└─ Faster recovery (50-100 years)

Stages:
├─ Weeds and grasses (Year 1)
├─ Shrubs (Year 5)
├─ Fast-growing trees (Year 20)
├─ Climax forest (Year 100)
└─ INSIGHT: Nature heals itself
```txt

**Time-lapse Visualization:**

```txt
SUCCESSION ANIMATION:

[Bare Rock]
   ↓ 10 years
[Lichens and Moss] (green specks)
   ↓ 40 years
[Grasses] (green carpet)
   ↓ 100 years
[Young Forest] (small tree symbols)
   ↓ 200 years
[Mature Forest] (large tree symbols, dense)

Player controls:
├─ Speed up time (1000x)
├─ Pause and examine each stage
├─ Cause disturbance (fire, logging)
├─ Observe recovery
└─ Learn patience and long-term thinking
```txt

**What Emerges:**

```txt
Directional Change:
├─ Predictable sequence of communities
├─ Each stage facilitates next
├─ Progress toward climax
└─ INSIGHT: Ecosystems develop

Intermediate Disturbance:
├─ Occasional fires maintain grassland
├─ Without fire → forest takes over
├─ Moderate disturbance → highest diversity
└─ INSIGHT: Change maintains diversity

Climax Community:
├─ Stable endpoint
├─ Self-perpetuating
├─ Maximum complexity
├─ But vulnerable to major disturbance
└─ INSIGHT: Stability from maturity
```txt

### Level 20-22: Niche Construction

**Goal:** Species modify their environment

**The Concept:**

```txt
NICHE CONSTRUCTION:
└─ Organisms don't just adapt to environment
└─ They CHANGE the environment
└─ Modified environment affects selection
└─ Feedback loop: organism ↔ environment

Examples:
├─ Beavers build dams → create wetlands
├─ Trees create shade → enable shade plants
├─ Earthworms aerate soil → improve growth
├─ Coral build reefs → create habitats
└─ Humans build cities → new ecosystems!
```txt

**In Game:**

```txt
Beaver Example:

Initial State:
├─ Fast-flowing stream
├─ Few aquatic plants
├─ Limited fish
└─ Simple ecosystem

Beavers Introduced:
├─ Build dam (visible structure)
├─ Water backs up
├─ Pond forms
├─ New habitat created!

New Ecosystem:
├─ Still water → aquatic plants thrive
├─ Plants → insects
├─ Insects → fish
├─ Fish → herons, otters
├─ Wetland ecosystem emerges
└─ INSIGHT: Ecosystem engineers
```txt

### Code Summary: Environment Modification

```txtjavascript
class NicheConstructor {
  // Species that modifies environment
  modifyEnvironment(species, location) {
    switch(species.engineeringType) {
      case 'BUILDER':
        // Creates physical structures
        this.createStructure(location, species.structureType);
        // Dams, nests, burrows, etc.
        break;
        
      case 'MODIFIER':
        // Changes environmental parameters
        this.alterEnvironment(location, species.modifications);
        // Shade, moisture, pH, etc.
        break;
        
      case 'CULTIVATOR':
        // Promotes specific other species
        this.encourageSpecies(location, species.mutualists);
        // Seed dispersal, pollination, etc.
        break;
    }
    
    // Environment change affects fitness landscape
    this.recalculateFitness(location);
  }
}
```txt

**What Emerges:**

```txt
Positive Feedback:
├─ Species improves environment for itself
├─ Population increases
├─ More modification
├─ Runaway positive feedback
└─ Example: Trees create forest → more trees

Negative Feedback:
├─ Species degrades environment for itself
├─ Population decreases
├─ Less modification
├─ Self-limiting
└─ Example: Overgrazing → less food → fewer grazers

Extended Phenotype:
├─ Organism's genes affect environment
├─ Environment affects organism
├─ Genes + Environment = Development
└─ INSIGHT: Nature and nurture inseparable

Legacy Effects:
├─ Dead organisms still affect ecosystem
├─ Fallen trees become habitat
├─ Bones fertilize soil
├─ Past shapes present
└─ INSIGHT: History matters
```txt

---

## Phase 4: Planetary Ecology (Levels 23-28)

### Global Systems

**Key Insight:** Local ecosystems connect to form planetary systems.

### Level 23-25: Biogeochemical Cycles

**Goal:** Understand element cycling at planetary scale

**The Major Cycles:**

```txt
CARBON CYCLE:

Atmosphere (CO₂) ←→ Photosynthesis → Plants
        ↑                               ↓
  Respiration                      Eaten by
        ↑                               ↓
    Animals ←──────────────────── Herbivores
        ↓                               ↓
    Death                            Death
        ↓                               ↓
 Decomposition ←──────────────── Organic matter
        ↓
  Soil carbon
        ↓ (slow)
  Fossil fuels
  
Visualization:
├─ CO₂ molecules (cyan particles) in atmosphere
├─ Plants absorb (green glow)
├─ Animals release (red glow)
├─ Decomposers recycle (brown glow)
└─ Planetary-scale circulation visible
```txt

```txt
NITROGEN CYCLE:

Atmosphere (N₂) ───→ Lightning
     ↓                   ↓
Nitrogen-fixing    Nitrogen oxides
  bacteria              ↓
     ↓                Rain
  Ammonia              ↓
     ↓              Nitrates
 Nitrifying ←─────────┘
  bacteria
     ↓
  Nitrates → Plants → Animals → Death
     ↑           ↓          ↓       ↓
     └───── Denitrifying ← Decomposition
            bacteria

Critical:
├─ Nitrogen = limiting nutrient
├─ Only certain bacteria can "fix" atmospheric N₂
├─ Legumes host nitrogen-fixers (mutualism)
└─ Agriculture depends on nitrogen cycle
```txt

```txt
WATER CYCLE:

    SUN
     ↓ energy
   Ocean ──evaporation──→ Atmosphere (water vapor)
     ↑                         ↓
     │                   Condensation
     │                         ↓
     │                      Clouds
     │                         ↓
     │                    Precipitation
     │                      ↓    ↓
     │                   Land  Lakes
     │                      ↓
     │                  Infiltration
     │                      ↓
     │                  Groundwater
     │                      ↓
     └───────── Runoff ─────┘

Connects all ecosystems:
├─ Ocean → atmosphere → land → rivers → ocean
├─ Distributes nutrients globally
├─ Enables life everywhere
└─ Most fundamental cycle
```txt

**What Emerges:**

```txt
Coupled Cycles:
├─ Carbon cycle affects nitrogen cycle
├─ Water cycle affects both
├─ Can't understand one in isolation
└─ INSIGHT: Planetary metabolism

Human Impact:
├─ Burning fossil fuels → excess CO₂
├─ Fertilizer use → excess nitrogen
├─ Deforestation → disrupted water cycle
├─ Visualize anthropogenic changes
└─ INSIGHT: Humans alter planetary cycles

Gaia Hypothesis:
├─ Earth as self-regulating system
├─ Life maintains habitable conditions
├─ Homeostasis at planetary scale
├─ Controversial but thought-provoking
└─ INSIGHT: Life sustains life
```txt

### Level 26-28: Biosphere Resilience

**Goal:** Test ecosystem resilience to perturbations

**Resilience Concepts:**

```txtjavascript
RESILIENCE_MECHANICS = {
  resistance: {
    description: "Ability to withstand disturbance",
    measure: "How much change before state shift?",
    example: "Forest resists small fires"
  },
  
  recovery: {
    description: "Ability to return to original state",
    measure: "How quickly after disturbance?",
    example: "Grassland recovers from grazing"
  },
  
  adaptation: {
    description: "Ability to adjust to new conditions",
    measure: "Fitness in new environment?",
    example: "Species evolve heat tolerance"
  },
  
  transformation: {
    description: "Ability to become fundamentally new",
    measure: "Novel state formation?",
    example: "Forest → grassland (permanent shift)"
  }
};
```txt

**Catastrophe Scenarios:**

```txt
CHALLENGE 1: Mass Extinction Event
├─ 50% of species randomly removed
├─ Observe: Does ecosystem recover?
├─ Resilient: Food web reroutes, fills niches
├─ Fragile: Cascade collapse, simplification
└─ INSIGHT: Redundancy = resilience

CHALLENGE 2: Climate Shift
├─ Temperature increases 5°C over 100 years
├─ Observe: Do species adapt or die?
├─ Resilient: Evolution tracks environment
├─ Fragile: Extinction, biome shifts
└─ INSIGHT: Rate of change matters

CHALLENGE 3: Invasive Species
├─ New predator with no natural enemies
├─ Observe: Does system absorb or collapse?
├─ Resilient: Native species adapt, resist
├─ Fragile: Invasive dominates, displaces natives
└─ INSIGHT: Novel threats dangerous

CHALLENGE 4: Resource Depletion
├─ Key nutrient becomes scarce
├─ Observe: Does system find alternatives?
├─ Resilient: Switch to new resources
├─ Fragile: Productivity collapses
└─ INSIGHT: Flexibility matters
```txt

**Tipping Points:**

```txt
REGIME SHIFTS:

Before Tipping Point:
├─ System in stable state (e.g., coral reef)
├─ Small perturbations absorbed
├─ Returns to equilibrium
└─ Resilient

At Tipping Point:
├─ Critical threshold reached
├─ Small push causes large change
├─ System flips to new state (e.g., algae-covered rock)
└─ Hard to reverse!

After Tipping Point:
├─ New stable state (hysteresis)
├─ Would require large intervention to restore
├─ Or may be impossible
└─ Permanent transformation

Visualization:
     Stable          Tipping        New Stable
     State            Point           State
      ●─────────────────●─────────────●
   Coral reef      Critical        Algae
   (healthy)        stress        (degraded)
   
   ↑ resilient   ↑ vulnerable   ↑ alternative stable state
```txt

**What Emerges:**

```txt
Early Warning Signs:
├─ Increased variance (flickering)
├─ Slower recovery from perturbations
├─ Spatial patterns (patchiness)
├─ Critical slowing down
└─ INSIGHT: Can predict tipping points

Irreversibility:
├─ Easy to degrade, hard to restore
├─ Asymmetric resilience
├─ Prevention > restoration
└─ INSIGHT: Precautionary principle

Multiple Stable States:
├─ Same environment, different ecosystems
├─ History determines which state
├─ Path dependence
└─ INSIGHT: Context matters
```txt

---

## EcoForge Visual Design

### Energy Flow Visualization

```txt
LEVEL 6-9: SIMPLE CHAINS
├─ Neon streams (yellow) from sun → producers
├─ Narrowing streams to consumers (90% loss)
├─ Thin streams to predators
├─ Heat dissipation (red particles fading)
└─ Simple, clear energy flow

LEVEL 10-15: COMPLEX WEBS
├─ Multiple streams branching
├─ Network of flowing energy
├─ Thickness = energy quantity
├─ Pulsing = seasonal variation
└─ Beautiful complexity

LEVEL 16-22: BIOME SCALE
├─ Color-coded by biome type
│  ├─ Forest: Deep green
│  ├─ Grassland: Yellow-green
│  ├─ Desert: Tan
│  └─ Tundra: White-blue
├─ Weather patterns visible (clouds, rain)
├─ Seasonal changes (animation)
└─ Continental scale visualization

LEVEL 23-28: PLANETARY
├─ Globe view
├─ Biogeochemical cycles (atmospheric circulation)
├─ Carbon in atmosphere (cyan haze)
├─ Ocean currents (blue streams)
├─ Land-sea-air connections
└─ Earth as living system
```txt

### Population Graphs

```txt
STANDARD DISPLAY:

Population
    │     Carrying Capacity (K)
 K  │ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
    │     ╱─╲   ╱─╲
    │    ╱   ╲ ╱   ╲
    │   ╱     ╳     ╲
    │  ╱     ╱ ╲     ╲
    │ ╱     ╱   ╲     ╲
  0 └──────────────────────────> Time
  
Features:
├─ Multiple species overlaid
├─ Color-coded by trophic level
├─ Carrying capacity line
├─ Extinction markers (X)
└─ Zoom in/out for detail
```txt

---

## EcoForge Achievements

```txt
🌿 FIRST FOOD CHAIN (100 XP)
└─ Stable producer-consumer for 500 gen

🕸️ WEB OF LIFE (150 XP)
└─ Food web with 5+ interconnected species

🔑 KEYSTONE DISCOVERY (200 XP)
└─ Correctly identify keystone species

🌊 TROPHIC CASCADE (250 XP)
└─ Observe cascade through 3+ levels

🌲 CLIMAX COMMUNITY (300 XP)
└─ Witness full ecological succession

🦫 ECOSYSTEM ENGINEER (250 XP)
└─ Species modifies environment

🌍 PLANETARY CYCLES (400 XP)
└─ All biogeochemical cycles functioning

⚠️ TIPPING POINT (500 XP)
└─ Observe ecosystem regime shift

💪 RESILIENCE (600 XP)
└─ Ecosystem recovers from catastrophe

♾️ GAIA (1000 XP)
└─ Self-regulating planetary biosphere
```txt

---

## Cross-Forge Integration

```txt
ECOFORGE → LIFEFORGE:
├─ Ecosystems drive evolution
├─ Niche partitioning creates speciation
└─ Coevolution shapes traits

ECOFORGE → NEUROFORGE:
├─ Environmental complexity → brain complexity
├─ Predator-prey arms race → intelligence
└─ Social ecosystems → social cognition

ECOFORGE → LINGUAFORGE:
├─ Group coordination for hunting in complex environments
├─ Teaching about poisonous vs edible plants
└─ Environmental knowledge = survival advantage

ECOFORGE → CULTFORGE:
├─ Resource distribution → economic systems
├─ Environmental constraints → culture
├─ Ecosystem management → civilization
└─ Agriculture = simplified ecosystem

ECOFORGE → COSMOGENESIS:
├─ Planetary conditions → biosphere type
├─ Multiple planets → comparative ecology
├─ Terraforming = ecosystem design
└─ Life alters planetary chemistry (oxygen, etc.)
```txt

---

## Player Experience Arc

```txt
LEVEL 6: "Oh, predators control populations!"
└─ Simple food chain understanding

LEVEL 10: "Everything's connected..."
└─ Web complexity appreciation

LEVEL 15: "Remove one species, everything changes!"
└─ Ecological sensitivity insight

LEVEL 20: "Species create their own environment!"
└─ Niche construction understanding

LEVEL 25: "It's all one planetary system..."
└─ Biosphere perspective

LEVEL 28: "We're part of this fragile web too."
└─ Environmental ethics realization
└─ Personal responsibility emerges
```txt

---

**EcoForge Complete.**
